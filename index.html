<!DOCTYPE html>
<html lang="zh-Hant">
<head>
<meta charset="UTF-8">
<title>ä¸­æ–‡èªéŸ³è¾¨è­˜æ¸¬è©¦</title>
<style>
body { font-family: sans-serif; text-align: center; margin-top: 50px; }
button { padding: 10px 20px; font-size: 16px; }
#text { margin-top: 20px; font-size: 20px; }
</style>
</head>
<body>
<h2>ğŸ¤ ä¸­æ–‡èªéŸ³è¾¨è­˜ + è‡ªå‹•æœ—è®€</h2>
<button id="startBtn">é–‹å§‹éŒ„éŸ³</button>
<div id="text"></div>

<script>
const startBtn = document.getElementById('startBtn');
const textDiv = document.getElementById('text');
const SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;
const recognition = new SpeechRecognition();

recognition.lang = 'zh-TW'; // âœ… ä¸­æ–‡è¾¨è­˜
recognition.continuous = false;
recognition.interimResults = false;

recognition.onresult = e => {
  const text = e.results[0][0].transcript;
  textDiv.textContent = 'è¾¨è­˜çµæœï¼š' + text;

  // âœ… è‡ªå‹•æœ—è®€çµæœ
  const utter = new SpeechSynthesisUtterance(text);
  utter.lang = 'zh-TW';
  speechSynthesis.speak(utter);

  // âœ… æœ—è®€å®Œ 1 ç§’å¾Œå†é‡æ–°æ”¶éŸ³
  utter.onend = () => setTimeout(() => recognition.start(), 1000);
};

recognition.onerror = e => {
  console.log('éŒ¯èª¤ï¼š', e.error);
  setTimeout(() => recognition.start(), 1000);
};

startBtn.onclick = () => {
  recognition.start();
  startBtn.disabled = true;
  startBtn.textContent = 'æ­£åœ¨è½...';
};
</script>
</body>
</html>
