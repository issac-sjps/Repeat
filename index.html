<!DOCTYPE html>
<html lang="zh-Hant">
<head>
<meta charset="UTF-8">
<title>èªéŸ³è¾¨è­˜å¾ªç’°ï¼ˆå«æç¤ºéŸ³ï¼‰</title>
<style>
body {
  font-family: 'Segoe UI', sans-serif;
  text-align: center;
  background: #0b1220;
  color: white;
  margin: 0;
  padding-top: 50px;
}
button {
  background: #6366f1;
  color: white;
  border: none;
  padding: 12px 25px;
  border-radius: 8px;
  font-size: 18px;
  cursor: pointer;
}
#text {
  margin-top: 30px;
  font-size: 24px;
}
</style>
</head>
<body>
<h2>ğŸ¤ ä¸­æ–‡èªéŸ³è¾¨è­˜ + è‡ªå‹•æœ—è®€å¾ªç’°</h2>
<button id="startBtn">é–‹å§‹</button>
<div id="text"></div>

<audio id="beep" src="https://actions.google.com/sounds/v1/alarms/beep_short.ogg" preload="auto"></audio>

<script>
const startBtn = document.getElementById('startBtn');
const textDiv = document.getElementById('text');
const beep = document.getElementById('beep');
const SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;
const recognition = new SpeechRecognition();

recognition.lang = 'zh-TW';       // âœ… ä¸­æ–‡è¾¨è­˜
recognition.continuous = false;
recognition.interimResults = false;

function playBeepAndStart() {
  // æ’­æ”¾æç¤ºéŸ³å¾Œå†é–‹å§‹éŒ„éŸ³
  beep.play();
  beep.onended = () => recognition.start();
}

recognition.onresult = e => {
  const text = e.results[0][0].transcript;
  textDiv.textContent = 'è¾¨è­˜çµæœï¼š' + text;

  // âœ… è‡ªå‹•æœ—è®€è¾¨è­˜æ–‡å­—
  const utter = new SpeechSynthesisUtterance(text);
  utter.lang = 'zh-TW';
  speechSynthesis.speak(utter);

  // âœ… æœ—è®€å®Œ 1 ç§’å¾Œå†æ’­æ”¾æç¤ºéŸ³ä¸¦é–‹å§‹æ–°ä¸€è¼ª
  utter.onend = () => setTimeout(playBeepAndStart, 1000);
};

recognition.onerror = e => {
  console.log('éŒ¯èª¤ï¼š', e.error);
  setTimeout(playBeepAndStart, 1000);
};

startBtn.onclick = () => {
  startBtn.disabled = true;
  startBtn.textContent = 'æ­£åœ¨é€²è¡Œä¸­...';
  playBeepAndStart();
};
</script>
</body>
</html>
